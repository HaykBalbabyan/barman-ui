(()=>{"use strict";var t={276:(t,e,s)=>{s.d(e,{Bl:()=>m,hj:()=>a,bG:()=>p,Rm:()=>f,B:()=>d,Lp:()=>h,yu:()=>c,Nd:()=>l});class r{#t;#e;constructor(t){this.#t={url:t.url,method:(t.method??"get").toUpperCase(),data:t.data??{},success:t.success??(()=>{}),error:t.error??(()=>{}),beforeSend:t.beforeSend??(()=>{}),contentType:t.contentType??""},this.#e="",this.#t.data&&(this.#e=this.#s(this.#t.data),this.#t.contentType=this.#t.contentType?this.#t.contentType:"application/x-www-form-urlencoded")}#s(t,e=""){const s=[];for(const r in t)if(t.hasOwnProperty(r)){const o=e?`${e}[${r}]`:r;if("object"!=typeof t[r]||Array.isArray(t[r]))Array.isArray(t[r])?t[r].forEach(((t,e)=>{if("object"!=typeof t||Array.isArray(t))s.push(`${o}[]=${encodeURIComponent(t)}`);else{const r=this.#s(t,`${o}[${e}]`);s.push(r)}})):s.push(`${o}=${encodeURIComponent(t[r])}`);else{const e=this.#s(t[r],o);s.push(e)}}return s.join("&")}async send(){this.#t.beforeSend();let t=null;const e=new XMLHttpRequest;this.#t.url+="POST"!==this.#t.method&&this.#e?"?"+this.#e:"",e.open(this.#t.method,this.#t.url,!0,"",""),this.#t.contentType&&e.setRequestHeader("Content-Type",this.#t.contentType),e.send(this.#e);const s=this;e.onreadystatechange=await(function(){if(4===this.readyState){t={statusCode:e.status,statusText:e.statusText};try{t.response=JSON.parse(e.responseText)}catch(s){t.response=e.responseText}200===this.status?s.#t.success(t.response,t):s.#t.error(t.response,t)}})}}var o=s(834);const n={templates:{urlpath:"http://barman.loc/public",dirpath:"./public"}},i=JSON.parse('{"dashboard":{"name":"Controller","path":"/","template":"/controller.html","title":"Controller"},"not-found":{"name":"Not found","template":"/not-found.html","title":"404 Not found"}}');async function a(t){return await new r(t).send()}async function c(t){return await new o.Z(t)}const u=new class{#r={};#o={};#n;constructor(){this.#n=document.querySelector("#app")}async getContent(t,e=null){const s=this;this.#r[t]?await this.#i(this.#r[t],t,e):await a({url:t,method:"get",async success(r){s.#r[t]=r,await s.#i(r,t,e)}})}#i(t,e,s=null){const r=this,o=(new DOMParser).parseFromString(t,"text/html"),n=o.querySelectorAll("script");if(this.#a(e),this.#o[e])for(const t in this.#o[e])this.#c(this.#o[e][t],t,e);else{this.#o[e]={};const t=o.querySelectorAll("style");for(const s of t){if(s.getAttribute("src"))a({url:s.getAttribute("src"),success(t){r.#o[e][s.getAttribute("src")]={code:t},r.#c(r.#o[e][s.getAttribute("src")],s.getAttribute("src"),e)}});else if(s.textContent){const t=(""+Math.random()).replace("0.","");r.#o[e][t]={code:s.textContent},r.#c(r.#o[e][t],t,e)}s.remove()}}s?s.innerHTML=o.body.innerHTML:this.#n.innerHTML=o.body.innerHTML,Array.from(n).map((t=>{t.src&&t.src.includes(".js")?c({srcs:[t.src]}):c({scripts:[t.textContent]})}))}#c(t,e,s){const r=document.createElement("style"),o="style-id-"+(""+Math.random()).replace("0.","");r.id=o,r.textContent=t.code,this.#o[s][e].id=o,document.head.append(r)}#a(t){for(const e in this.#o)if(e!==t&&Object.keys(this.#o[e]).length)for(const t of Object.values(this.#o[e]))document.querySelector("#"+t.id).remove()}};async function h(t,e){await u.getContent(t,e)}const l=new class{#u={};#h=null;referer={};events={onLoad:t=>{},onChange:(t,e)=>{}};constructor(){this.#l()}async#l(){this.referer=null,await this.update(),this.#d(),this.events.onLoad(this.#h)}#d(){window.addEventListener("popstate",(t=>{this.update(),this.#p(),setTimeout((()=>{"function"==typeof this.events.onChange&&this.events.onChange(t.state,this.referer)}),1)})),document.addEventListener("click",(t=>{const e=t.target;if(e.matches("a[router]")||e.closest("a[router]")){const s=e.matches("a[router]")?e:e.closest("a[router]");if(!s.href)return;t.preventDefault(),this.go(s.href)}}))}#p(){const t=this.getHistoryLastId();this.referer={path:window.location.pathname,title:document.title,name:null,routeName:""},t&&(this.referer.path=this.#u[t]?.route?.path||this.referer.path,this.referer.title=this.#u[t]?.route?.title||this.referer.title,this.referer.route=this.#u[t]?.route||null,this.referer.routeName=this.#u[t]?.routeName||"")}#f(t=null,e=!1){const s=t||window.location.href;if(t&&"object"==typeof i[t])return e?i[t]:t;for(const t in i){const r=i[t],o=this.parseUrl(window.location.origin+r.path,s);if(o.match)return i[t].variables=o.variables,e?i[t]:t}return"object"==typeof i["not-found"]?e?i["not-found"]:"not-found":null}getCurrent(){return this.#h}async update(){const t=this.#f();if(t){const e=i[t];this.#h=e,await h(n.templates.urlpath+e.template),document.title=t?e.title:""}}go(t,e=!1){if(window.location.href===t&&!e)return;const s=this.#f(t);if(s||!s&&e){const e={id:this.getHistoryLastId()+1},r=i[s]||{};if(s)e.page=r.name,e.routeName=s,e.route=r;else{if(!this.isURL(t))throw new Error("Route error: Route can't be force changed because "+t+" is not right url");e.page="No name",r.routeName="",e.route=null}this.#p(),window.history.pushState(e,s?r.title:e.name,t),this.#m(e),this.update(),setTimeout((()=>{"function"==typeof this.events.onChange&&this.events.onChange(e,this.referer)}),1)}}getHistoryLastId(){const t=Object.keys(this.#u);return t.length?+t[t.length-1]:0}#m(t){const e=this.#u;e[this.getHistoryLastId()+1]=t,this.#u=e}isURL(t){return new RegExp("^(https?:\\/\\/)?((([a-zA-Z\\d]([a-zA-Z\\d-]{0,61}[a-zA-Z\\d])?)\\.)+[a-zA-Z]{2,6}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-zA-Z\\d%@_.~+&:]*)*(\\?[;&a-zA-Z\\d%@_.,~+&:=-]*)?(\\#[-a-zA-Z\\d_]*)?$","i").test(t)}parseUrl(t,e){const s=t.replace(/\{[^\}]+\}/g,"([^/]+)"),r=new RegExp(`^${s}$`),o=e.match(r);if(o){const e=t.match(/\{[^\}]+\}/g),s={};return e&&e.forEach(((t,e)=>{const r=t.replace(/[{}]/g,"");s[r]=o[e+1]})),{variables:s,match:!0}}return{variables:{},match:!1}}};function d(t,e,s,r={}){if("function"!=typeof s||"string"!=typeof t||"string"!=typeof e&&e!==document&&e!==window)return;(t=t.toLowerCase()).includes(",")&&(t=t.replace(/\s+/g,"").split(","));const o="string"==typeof e?document:e;if(Array.isArray(t))for(const e of t)o.removeEventListener(e,n,r),o.addEventListener(e,n,r);else o.removeEventListener(t,n,r),o.addEventListener(t,n,r);function n(t){if(e!==document&&e!==window){if(t.target.matches(e)||t.target.closest(e)){const r=t.target.matches(e)?t.target:t.target.closest(e);s(t,r)}}else{const r=e===document?document:window;s(t,r)}}}function p(t){return document.querySelector(t)}function f(t){return document.querySelectorAll(t)}class m{config={};constructor(){this.config=n}}},834:(t,e,s)=>{s.d(e,{Z:()=>o});var r=s(276);class o{srcs;scripts;constructor(t){this.srcs=t?.srcs||[],this.scripts=t?.scripts||[],this.#y()}async#y(){if(this.srcs)for(const t of this.srcs)await this.#w(t);if(this.scripts)for(const t of this.scripts)await eval(t)}async#w(t){await(0,r.hj)({url:t,success(t){eval(t)}})}}}},e={};function s(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,s),n.exports}s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={},o;o=s(276),new o.Bl,new class{constructor(){this.#g(),this.#v()}#g(){o.Nd.events.onLoad=t=>{setTimeout((()=>{const e=document.querySelector("#page-loader-wrapper");e.style.opacity=0,(0,o.bG)("#rotate-error-wrapper")&&((0,o.bG)("#rotate-error-wrapper").style.display="");const s=(0,o.Rm)("#header .menu a");if(s)for(const e of s)o.Nd.parseUrl(window.location.origin+t.path,e.href).match&&e.classList.add("active");setTimeout((()=>{e.style.display="none"}),400)}),500)},(0,o.B)("contextMenu",document,(function(t){t.preventDefault()})),(0,o.B)("touchMove",document,(function(t){1!==t.scale&&t.preventDefault()}),{passive:!1});let t=0;(0,o.B)("touchEnd",document,(function(e){const s=(new Date).getTime();s-t<=300&&e.preventDefault(),t=s}),!1)}#v(){const t=this;(0,o.B)("click",".controller-wrapper .send-button .send",(function(e,s){let r=[];const n=(0,o.Rm)(".controller-wrapper .drink-for-cup");for(const t of n)t.value&&r.push(t.value);r.length&&t.#b(r)}))}#b(t){t=t.join(","),(0,o.hj)({url:"/ajax",method:"get",data:{drink:t},success(t){}})}}})();